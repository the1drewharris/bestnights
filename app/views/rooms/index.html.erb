<% content_for :title, "BestNights.com - Room" %>

<% if current_user.new_signup? %>
	<%= link_to "Hotels", hotels_path %>
<% end %>

<header>
	<h1 class="prop-title">Room</h1>
</header>

<%= form_tag rooms_path, :id => "search_form", :method => 'get' do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %>

<div id="container-main">
	<div class="formactions">
		<% if current_user.new_signup? %>
			<%= link_to "Add", new_room_path(:hotel_id => @hotel.id) %>
		<% else %>
			<%= link_to "Add", new_room_path %>
		<% end %>
		
  </div>
	<table class="admintablelist">
		<tr>
			<th>Name</th>
			<th>Description</th>
			<th>Price</th>
			<th>Original Price</th>
			<th>Hotel</th>
			<th>Room Type</th>
			<th>Action</th>
			<th></th>
			<th></th>
		</tr>
		<% @rooms.each do |room| %>
		  <tr>
		  	<td><%= room.name %></td>
				<td><%= room.description %></td>
				<td>$<%= number_with_precision(room.price, :precision => 2, :separator => '.', :delimiter => ',') %></td> 
				<td>$<%= number_with_precision(room.original_price, :precision => 2, :separator => '.', :delimiter => ',') %></td>
				<td><%= room.hotel.name unless room.hotel.nil? %></td>
				<td><%= room.room_type.room_type unless room.room_type.nil? %></td>
				<% if can? :show, room %>
					<td><%= link_to "Show", room_path(room) %></td>
				<% end %>
				<% if can? :edit, room %>
					<td><%= link_to "Edit", edit_room_path(room) %></td>
				<% end %>
				<% if can? :delete, room %>
					<td><%= link_to "Delete", room_path(room), :method => :delete %></td>
				<% end %>	
		  </tr>
		<% end %>
	</table>
</div>

<%= javascript_include_tag :jquery_ujs %>